function clear_fields(){idsArray.forEach(function(e){$(`#td_${e}`)[0].style.background="",$(`#${e}`)[0].value=""})}function update_table(){const e=$("#ut_error")[0];e.style.display="none";const t=new XMLHttpRequest;t.open("POST","./classes/inc/update_table_learn.inc.php",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onload=function(){if(200==this.status){const t=JSON.parse(this.responseText);if(t.return){let e=$("#logs_table_tbody")[0];e.innerHTML="",t.return.forEach(function(t){let n=document.createElement("tr"),r=document.createElement("td"),s=document.createElement("button");s.type="button",s.className="logs-btns btn",s.setAttribute("onclick","clicked_log_id("+t[1]+")"),s.disabled=!0,s.innerText=t[0],r.appendChild(s),n.appendChild(r);let o=2;for(;o<7;)r=document.createElement("td"),r.innerText=t[o],n.appendChild(r),o++;r=document.createElement("td");let l=document.createElement("a");l.href="./../../user/profile.php?id="+t[7],l.target="_blank",l.innerText=t[8],r.appendChild(l),n.appendChild(r),e.appendChild(n)})}else e.innerText="Data loading error, when updating table",e.style.display="block"}else e.innerText="Connection error, when updating table",e.style.display="block"},t.send()}function reset_log_ids(){update_delete(),$("#lt_success")[0].style.display="none",$("#lt_error")[0].style.display="none";const e=document.querySelectorAll(".logs-btns");e.forEach(function(e){e.className="logs-btns btn",e.disabled=!0}),logType="none"}function update_log_ids(){$("#lt_success")[0].style.display="none",$("#lt_error")[0].style.display="none";const e=document.querySelectorAll(".logs-btns");e.forEach(function(e){e.className="logs-btns btn btn-primary",e.disabled=!1}),logType="update"}function clicked_log_id(e){$("#lt_success")[0].style.display="none";const t=$("#lt_error")[0];t.style.display="none";const n=new XMLHttpRequest;n.open("POST","./classes/inc/"+logType+"_log_learn.inc.php",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),"update"==logType&&(n.onload=function(){if(200==this.status){const e=JSON.parse(this.responseText);if(e.error)t.innerText=e.error,t.style.display="block";else if(e.return){const t=$("#update_record_div")[0];t.innerHTML=e.return;const n=document.createElement("script");n.src="./amd/min/update_log_learn.min.js",t.appendChild(n),t.scrollIntoView()}else t.innerText="Loading error",t.style.display="block"}else t.innerText="Connection error",t.style.display="block"},n.send(`id=${e}`))}function refresh_it(){const e=new XMLHttpRequest;e.open("POST","./classes/inc/refresh_it_learn.inc.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onload=function(){if(200==this.status){const e=JSON.parse(this.responseText);e.return&&($("#it_total_left")[0].innerText=e.return)}},e.send()}function refresh_bar(){const e=new XMLHttpRequest;e.open("POST","./classes/inc/refresh_bar_learn.inc.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onload=function(){if(200==this.status){const e=JSON.parse(this.responseText);if(e.return){const t=e.return[0],n=e.return[1];$("#otjh_prog_progress_p")[0].innerText=`: ${t}%`,$("#otjh_prog_expected_p")[0].innerText=`: ${n}%`,$("#otjh_prog_incomplete_p")[0].innerText=`: ${100-t}%`;const r=$("#progressbar")[0];t>=n?r.style=`width: ${t}%; height: 25px; background-color: green;`:(r.style=`width: ${t}%; height: 25px; background-color: green;`,$("#expectedbar")[0].style=`width: ${n-t}%; height: 25px; background-color: orange;`)}}},e.send()}function update_delete(){$("#update_record_div")[0].innerHTML=""}const idsArray=["date","activity","whatlink","impact","duration"];$("#hourslog_form")[0].addEventListener("submit",e=>{e.preventDefault();const t=$("#hl_error")[0];t.style.display="none";let n="";idsArray.forEach(function(e){$(`#td_${e}`)[0].style.background="",n+=e+"="+$(`#${e}`)[0].value+"&"}),n=n.slice(0,-1);const r=new XMLHttpRequest;r.open("POST","./classes/inc/submit_log_learn.inc.php",!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){if(200==this.status){const e=JSON.parse(this.responseText);e.error?(t.innerText="Invalid values: ",e.error.forEach(function(e){idsArray.includes(e[0])&&($(`#td_${e[0]}`)[0].style.background="red",t.innerText+=e[1]+"|")}),t.style.display="block"):e.return?(clear_fields(),update_table(),refresh_it(),refresh_bar()):(t.innerText="Creation error.",t.style.display="block")}else t.innerText="Connection error.",t.style.display="block"},r.send(n)});let logType="none";refresh_bar();